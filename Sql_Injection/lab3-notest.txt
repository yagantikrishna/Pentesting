SQLi- Product category filter

Goal: SQL injection UNION attack, determining the number of columns returned by the query

Background (Union): Union operator concatenates results of two queries into a single result set.
UNION ALL- includes all duplicates.
UNION- excludes duplicates.

Basic Rules:
The number and the order of the columns must be same in all queries.
The data types must be compatible.

table1      table2
------      -------
1,2         3,4
4,5         6,7

Query #1: select a,b from table1
1,2
4,5

Query #2: select a,b from table1 Union select c,d from table2
1,2
4,5
3,4
6,7

SQLi attack: Imagine you are doing a blackbox pentest and you dont have much knowledge about the number of columns being used in that query.
(way#1)
#select ? from table1 UNION select NULL.
if columns mismatch we get error.
We keep trying until we dont get any error
#select ? from table1 UNION select NULL, NULL
200 response indicates we got correct number of columns.

(#way2)
ORDER BY CLAUSE
Sorts data returned by a query in SQL Server. Use this clause to:

Order the result set of a query by the specified column list and, optionally, limit the rows returned to a specified range. The order in which rows are returned in a result set are not guaranteed unless an ORDER BY clause is specified.

Determine the order in which ranking function values are applied to the result set.

#select a,b from table1 order by 1---- orders column1
#select a,b from table1 order by 2---- orders column2
#select a,b from table1 order by 3---- error, since there is no column 3
We follow this approach until we get a error.
